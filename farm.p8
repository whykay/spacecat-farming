pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--super simple farming game--

-- goals
-- ❎ player that can move
-- ❎ plant seeds
-- 3. crops grow
-- 4. harvest crops

function _init()
	iplr()
	icrops()
end

function _update()
	uplr()
	ucrops()
end

function _draw()
	cls(11)
	map()
	
	dplr()
	dcrops()
end

-->8
--player--

function iplr()
	plr = {
		x = 63,
		y = 63
	}
end

function uplr()
	--movement
	if btn(➡️) then
		plr.x += 1
	elseif btn(⬅️) then
		plr.x -= 1
	elseif btn(⬆️) then
		plr.y -= 1
	elseif btn(⬇️) then
		plr.y += 1
	end --endif
	
	
	--plant seeds
	local ptx = (plr.x+4)/8
	local pty	= (plr.y+8)/8
	
	if btn(❎) then
		mset(ptx, pty, 3) 
		add(seeds, {
				sx = ptx,
				sy = pty,
				tig = 0 --time in ground
		})
	end
end

function dplr()
	spr(12, plr.x, plr.y)
end 
-->8
--nature's way--

function icrops()
	croptimer = 300 --frames
	seeds = {}
end

function ucrops()
--	if croptimer > 0 then
--		croptimer -= 1
--	else
--		growcrops()
--		croptimer = 300
--	end
	
	for s in all(seeds) do
		s.tig += 1
		if s.tig > 300 then
			mset(s.sx, s.sy, 4) --grow carrot
		end
	end
	
end

function dcrops()
	print(croptimer)
end

function growcrops()
	--loop through all tiles on map
	--change tiles 3 -> 4 
	for x=0,15 do
		for y =0, 15 do
			if mget(x, y) == 3 then
				mset(x, y, 4) --grow carrot
			end
		end
	end
end
__gfx__
000000000000000004444440044444400444444000000000000000000000000000000000000000000000000000000000000d6000000000000000000000000000
00000000000000004424444444244444444b4b440000000000000000000000000000000000000000000000000000000000cd6c00000000000000000000000000
0070070000000030444442444444a2444444b4440000000000000000000000000000000000000000000000000000000000077000000000000000000000000000
0007700000000300444244444a42444444499944000000000000000000000000000000000000000000000000000000000ddd66d0000000000000000000000000
000770000300030044444444444444444429992400000000000000000000000000000000000000000000000000000000d0dcc60d000000000000000000000000
0070070000300000424442444244a2444442224400000000000000000000000000000000000000000000000000000000d0dd660d000000000000000000000000
000000000030000044444444444444444444444400000000000000000000000000000000000000000000000000000000009d6a00000000000000000000000000
0000000000000000044444400444444004444440000000000000000000000000000000000000000000000000000000000009a000000000000000000000000000
00000000000000000101000000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001b1b100001656510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000001bb100001ffaaa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001bb9910001faaba1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000114991001aa9aa1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000014991017977f1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000119101777ff1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000001000111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000100000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000100040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000020202000000000004040400010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000202030000000a0004040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000020302000000000004020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000000010000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
